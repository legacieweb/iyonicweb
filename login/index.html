<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Login - Access Your Iyonicorp Dashboard</title>

  <!-- Meta Description -->
  <meta name="description" content="Securely log in to your Iyonicorp account to manage your custom websites, subscriptions, domains, and more.">

  <!-- Meta Keywords -->
  <meta name="keywords" content="Iyonicorp login, user dashboard login, website manager login, web subscriptions, domain login, custom websites, iyonicorp dashboard, client login, ecommerce control panel, iyonicorp account access">

  <!-- Canonical -->
  <link rel="canonical" href="https://www.iyonicorp.com/login" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="logo.png" />

  <!-- Open Graph (Facebook/LinkedIn) -->
  <meta property="og:title" content="Login to Iyonicorp | Manage Your Web Services" />
  <meta property="og:description" content="Access your Iyonicorp dashboard to manage your websites, domains, and subscriptions. Secure & reliable platform." />
  <meta property="og:image" content="https://videos.openai.com/vg-assets/assets%2Ftask_01jsgs5eqteg49qm4fytq8mq88%2Fimg_0.webp?st=2025-04-23T05%3A56%3A22Z&se=2025-04-29T06%3A56%3A22Z&sks=b&skt=2025-04-23T05%3A56%3A22Z&ske=2025-04-29T06%3A56%3A22Z&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skoid=3d249c53-07fa-4ba4-9b65-0bf8eb4ea46a&skv=2019-02-02&sv=2018-11-09&sr=b&sp=r&spr=https%2Chttp&sig=Q29aRBd%2BwOTv55W5QOdi9M%2FfEavBwrpyEC7pk1GD7Rc%3D&az=oaivgprodscus" />
  <meta property="og:url" content="https://www.iyonicorp.com/login" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Iyonicorp" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Login to Iyonicorp | Manage Your Web Services" />
  <meta name="twitter:description" content="Control your Iyonicorp experience. Login to handle your websites, billing, and domains." />
  <meta name="twitter:image" content="https://videos.openai.com/vg-assets/assets%2Ftask_01jsgs5eqteg49qm4fytq8mq88%2Fimg_0.webp?st=2025-04-23T05%3A56%3A22Z&se=2025-04-29T06%3A56%3A22Z&sks=b&skt=2025-04-23T05%3A56%3A22Z&ske=2025-04-29T06%3A56%3A22Z&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skoid=3d249c53-07fa-4ba4-9b65-0bf8eb4ea46a&skv=2019-02-02&sv=2018-11-09&sr=b&sp=r&spr=https%2Chttp&sig=Q29aRBd%2BwOTv55W5QOdi9M%2FfEavBwrpyEC7pk1GD7Rc%3D&az=oaivgprodscus" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    @keyframes slideFade {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .slide-fade {
      animation: slideFade 0.8s ease-out forwards;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-100 via-white to-purple-100 min-h-screen flex flex-col justify-between">

  <!-- Header -->
  <header class="w-full py-6 px-4 text-center">
    <img src="20250423_1135_Black Lines Emblem_remix_01jsgwj1ggetfbngcfv36v4dt5.png" alt="Iyonicorp Logo" class="mx-auto mb-2 w-14 h-14 md:w-12 md:h-12">
    <h1 class="text-3xl md:text-2xl font-extrabold text-blue-800">Iyonicorp</h1>
  </header>

  <!-- Login Card -->
  <main class="flex-1 flex items-center justify-center px-4">
    <div class="bg-white p-8 rounded-xl shadow-xl w-full max-w-lg sm:max-w-md slide-fade transition-all duration-700">
      <h2 class="text-3xl md:text-2xl font-bold mb-5 text-center text-gray-800">Login to Your Account</h2>

      <!-- Login Form -->
      <form id="loginForm" class="space-y-4">
        <input 
          type="email" 
          id="email" 
          placeholder="Email" 
          class="w-full px-4 py-3 text-lg border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300 transition"
          required 
        />
        <input 
          type="password" 
          id="password" 
          placeholder="Password" 
          class="w-full px-4 py-3 text-lg border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300 transition"
          required 
        />
        <button 
          type="submit" 
          class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg text-lg font-semibold transition-all"
        >
          Login
        </button>
      </form>

      <p class="text-sm text-center mt-5 text-gray-600">
        Forgot your password? 
        <a href="#" onclick="toggleResetForm()" class="text-red-500 hover:underline">Reset here</a>
      </p>
      <p class="text-sm text-center mt-2">Don't have an account? <a href="../signup" class="text-green-600 hover:underline">Sign up</a></p>

      <!-- Reset Password Form -->
      <div id="resetForm" class="hidden mt-6 animate-fadeIn">
        <h3 class="text-lg font-semibold mb-3 text-center text-gray-800">Reset Password</h3>
        <input 
          type="email" 
          id="resetEmail" 
          placeholder="Your email" 
          class="w-full p-3 text-base border rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-blue-200"
        />
        <button 
          onclick="sendResetCode()" 
          class="w-full bg-gray-700 hover:bg-gray-800 text-white py-2 rounded mb-3 transition"
        >
          Send Reset Code
        </button>

        <input 
          type="text" 
          id="resetCode" 
          placeholder="Reset code" 
          class="w-full p-3 text-base border rounded-lg mb-3"
        />
        <input 
          type="password" 
          id="newPassword" 
          placeholder="New password" 
          class="w-full p-3 text-base border rounded-lg mb-3"
        />
        <button 
          onclick="submitNewPassword()" 
          class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded transition"
        >
          Update Password
        </button>

        <p id="resetMessage" class="text-sm text-center mt-2 text-gray-600"></p>
      </div>
    </div>
  </main>

<!-- Cool Notification Popup -->
<div id="notifyPopup" class="fixed top-5 right-5 z-50 hidden bg-blue-100 text-blue-800 border border-blue-300 px-4 py-3 rounded-lg shadow-lg transition-opacity duration-300">
  <strong class="font-bold">üîî</strong>
  <span id="popupMessage" class="ml-2">Message here</span>
</div>

  <!-- Footer -->
  <footer class="text-center py-4 bg-white text-sm text-black shadow-inner mt-10">
    &copy; <span id="year"></span> Iyonicorp. All rights reserved.
  </footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  const popup = document.getElementById("notifyPopup");
  const popupMsg = document.getElementById("popupMessage");

  function showPopup(message, type = "info") {
    popupMsg.textContent = message;
    popup.className = `fixed top-5 right-5 z-50 bg-${type === "error" ? 'red' : 'blue'}-100 text-${type === "error" ? 'red' : 'blue'}-800 border border-${type === "error" ? 'red' : 'blue'}-300 px-4 py-3 rounded-lg shadow-lg transition-opacity duration-300`;
    popup.classList.remove("hidden");
    setTimeout(() => popup.classList.add("hidden"), 4000);
  }

  function toggleResetForm() {
    const form = document.getElementById("resetForm");
    form.classList.toggle("hidden");
  }

  document.getElementById("loginForm").onsubmit = async function (e) {
    e.preventDefault();
    const loginBtn = e.target.querySelector("button[type='submit']");
    loginBtn.disabled = true;
    loginBtn.textContent = "Logging in...";

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    try {
      const res = await fetch("https://iyonicweb.onrender.com/api/auth/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, password }),
      });

      const data = await res.json();

      if (res.ok) {
        localStorage.setItem("user", JSON.stringify(data.user));
        showPopup("‚úÖ Login successful! Redirecting...");
        setTimeout(() => window.location.href = "../dashboard", 1500);
      } else {
        showPopup(data.message || "Login failed", "error");
        loginBtn.disabled = false;
        loginBtn.textContent = "Login";
      }
    } catch (err) {
      showPopup("‚ùå Network error. Try again.", "error");
      loginBtn.disabled = false;
      loginBtn.textContent = "Login";
    }
  };

  async function sendResetCode() {
    const email = document.getElementById("resetEmail").value;
    const btn = event.target;
    btn.disabled = true;
    btn.textContent = "Sending...";

    if (!email) {
      showPopup("‚ö†Ô∏è Enter your email", "error");
      btn.disabled = false;
      btn.textContent = "Send Reset Code";
      return;
    }

    try {
      const res = await fetch("https://iyonicweb.onrender.com/api/auth/send-reset-code", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email })
      });
      const data = await res.json();
      showPopup(data.message || "Code sent!");
    } catch {
      showPopup("‚ùå Error sending reset code.", "error");
    }

    btn.disabled = false;
    btn.textContent = "Send Reset Code";
  }

  async function submitNewPassword() {
    const email = document.getElementById("resetEmail").value;
    const code = document.getElementById("resetCode").value;
    const newPassword = document.getElementById("newPassword").value;
    const btn = event.target;
    btn.disabled = true;
    btn.textContent = "Updating...";

    if (!email || !code || !newPassword) {
      showPopup("‚ö†Ô∏è Fill all fields.", "error");
      btn.disabled = false;
      btn.textContent = "Update Password";
      return;
    }

    try {
      const res = await fetch("https://iyonicweb.onrender.com/api/auth/confirm-reset", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, code, newPassword })
      });
      const data = await res.json();
      showPopup(data.message || "‚úÖ Password updated!");
    } catch {
      showPopup("‚ùå Error updating password.", "error");
    }

    btn.disabled = false;
    btn.textContent = "Update Password";
  }
</script>

</body>
</html>
